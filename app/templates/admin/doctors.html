{% extends 'admin_base.html' %}
{% block content %}
  <div class="flex items-start justify-between gap-4 flex-wrap">
    <div>
      <div class="text-xs uppercase tracking-[0.2em]" style="color: var(--admin-muted);">Hospital governance</div>
      <h1 class="text-xl font-semibold mt-1">Doctors</h1>
      <p class="text-sm mt-2 max-w-2xl" style="color: var(--admin-muted);">Manage doctor metadata (specialization and hospital association). Clinical access is still governed by patient consent.</p>
    </div>
    <div class="flex gap-3 flex-wrap">
      <a class="admin-btn admin-btn-soft" href="{{ url_for('admin.overview') }}">
        <span class="iconify" data-icon="solar:arrow-left-linear"></span>
        Overview
      </a>
      <a class="admin-btn admin-btn-soft" href="{{ url_for('admin.users') }}">
        <span class="iconify" data-icon="solar:users-group-rounded-linear"></span>
        Users
      </a>
    </div>
  </div>

  <div class="admin-card p-6 mt-6">
    <div class="flex items-center justify-between gap-4 flex-wrap">
      <div>
        <div class="text-xs uppercase tracking-[0.2em]" style="color: var(--admin-muted);">Directory</div>
        <div class="text-sm mt-2" style="color: var(--admin-muted);">{{ doctors|length }} doctors</div>
      </div>
      <div class="text-sm" style="color: var(--admin-muted);">Ensure hospital IDs align with your internal registry.</div>
    </div>

    <div class="mt-5 overflow-x-auto">
      <table class="min-w-full admin-table">
        <thead>
          <tr>
            <th class="text-left px-4 py-3">User ID</th>
            <th class="text-left px-4 py-3">Specialization</th>
            <th class="text-left px-4 py-3">Hospital ID</th>
            <th class="text-left px-4 py-3">Update</th>
          </tr>
        </thead>
        <tbody>
          {% for d in doctors %}
            <tr style="border-top: 1px solid var(--admin-border);">
              <td class="px-4 py-3 text-sm">{{ d.user_id }}</td>
              <td class="px-4 py-3 text-sm">{{ d.specialization }}</td>
              <td class="px-4 py-3 text-sm">{{ d.hospital_id }}</td>
              <td class="px-4 py-3">
                <form method="post" class="grid grid-cols-1 md:grid-cols-[1fr_1fr_auto] gap-2 items-center">
                  <input type="hidden" name="user_id" value="{{ d.user_id }}" />
                  <input class="admin-input" name="specialization" type="text" value="{{ d.specialization }}" />
                  <input class="admin-input" name="hospital_id" type="text" value="{{ d.hospital_id }}" />
                  <button class="admin-btn admin-btn-primary" type="submit">Save</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
